# page_0024 OCR比較分析

**日付**: 2026-02-14
**対象画像**: `output/157012a97dcbebed/pages/page_0024.png`

## 1. ゴールデンリファレンス（手動転記）

```
すべての要求に応えてしまう

株式会社ロボチェック社は、このたび新しい製品企画「アームチェッカー」のプロジェクトを立ち上げました。ハルさんが新任プロジェクトリーダーとして、最初に取り掛かるのが企画提案です。現時点では「ロボアーム製造における検査の自動化」という、ざっくりとしたイメージしかないため、どのような製品にして、予算はいくらくらい、いつ発売するのか、具体的な企画をまとめて経営層の承認を得る必要があるようです。早速マーケティング部長に聞いてみることにしました。詳細を語ってくれました。

必要なのは検査の自動化なんだけど、実際に重要顧客のラインを見たら、作業者が検査時にアームを調整して不良品も良品にしてしまうのよ。だから自動調整もできなきゃ今より生産性が下がってしまいかねないんだ。

ええ！自動調整も必要なんですね。それは技術課題だなあ。でも以前は「関節の滑らかさが見たい」と言っていませんでしたっけ？

それは別の顧客のことかな。それで、重要なのが納期！実はその重要顧客が今度ラインを拡張するらしくて、稼働予定の2027年に間に合うと結構な数が出そう。逆にこれを逃すと売り上げは非常に厳しくなる。

じゃあ、2026年12月ぐらいにリリース必須と……。
```

## 2. 各エンジン出力

### 2.1 Yomitoku（7 items）
**品質**: ⭐⭐⭐⭐⭐ 優秀

段落単位で認識。日本語の精度が非常に高い。

**誤認識箇所**:
- 「予算はいくらくらい」→「予算はいくらで」（原文と微妙に異なる）
- 「必要があるようです」→「なりません」（文末表現の違い）
- 「マーケティング部長」→「マーケティングや事業に関わるメンバー」（内容が異なる）

### 2.2 EasyOCR（30 items）
**品質**: ⭐⭐⭐ 普通

単語/フレーズ単位で細かく分割。いくつかの誤認識あり。

**誤認識箇所**:
- 「ロボチェック」→「口ボチェック」（カタカナのロがカタカナの口に）
- 「顧客」→「霞客」（複数箇所）
- 「招集」→「摺集」
- 「詳細」→「群細」
- 「稼働」→「和働」

### 2.3 PaddleOCR
**状態**: 未インストール（`No module named 'paddleocr'`）

## 3. 現行ROVER出力
**品質**: ⭐⭐ 問題あり

**重大な問題**:
- **重複行が多数発生** - 同じ内容が2回出現
- ライン単位のアライメントが不適切で、yomitokuとeasyocrの両方の行が別々に出力されている

**例**:
```
株式会社口ボチェック社はこのたび新しい製品企画「アームチェッカ  ← easyocr
株式会社ロボチェック社は、このたび新しい製品企画「アームチェッカ  ← yomitoku
```

**根本原因**:
1. yomitokuは段落単位（7 items）、easyocrは単語単位（30 items）で出力
2. y座標によるライン整列が、異なる粒度の出力をうまく統合できていない
3. 投票が行われず、両方の結果がそのまま出力されている

## 4. 必要な改善（008-rover-redesign仕様）

1. **文字レベルアライメント**: difflibのSequenceMatcherを使用
2. **信頼度重み付き投票**: `weight = engine_weight × confidence`
3. **ゴミフィルタ**: `confidence < 0.5` は投票前に除外
4. **正規化**: 投票前にテキストを正規化して比較

## 5. ファイル一覧

| ファイル | 内容 |
|----------|------|
| `page_0024_golden.txt` | 手動転記（ゴールデンリファレンス） |
| `page_0024_yomitoku.txt` | Yomitoku単体出力 |
| `page_0024_easyocr.txt` | EasyOCR単体出力 |
| `page_0024_rover_current.txt` | 現行ROVERアルゴリズム出力 |

## 6. 新ROVER検証結果 (2026-02-14)

### 比較サマリー

| 指標 | 現行ROVER | 新ROVER v4 | 改善 |
|------|-----------|------------|------|
| 出力行数 | 36行 | **19行** | -47% |
| ゴールデン類似度 | 64.43% | **86.77%** | **+22.34%** |
| 重複行 | 多数 | ほぼなし | ✅ |

### 新ROVERアルゴリズム (v4)

1. **yomitoku段落を基準構造として使用**
2. **easyocr行をy座標でyomitoku段落にマッピング**
3. **段落単位で文字レベル投票**（信頼度重み付き）
4. **重複除去のpost-processing**

### 解決した問題

- ✅ **重複行の解消**: yomitoku（段落）とeasyocr（行）の粒度差による重複を解決
- ✅ **品質向上**: 文字レベル投票により誤認識が補正
- ✅ **構造維持**: yomitokuの高品質な段落構造が保持

### 残る軽微な問題

- ページ番号「66」が見出しと結合（yomitokuの段落認識の問題）

### 追加ファイル

| ファイル | 内容 |
|----------|------|
| `page_0024_rover_new_v4.txt` | 新ROVER v4出力 |

### 結論

**008-rover-redesign仕様で問題は解決可能**。実装を進めてよい。
